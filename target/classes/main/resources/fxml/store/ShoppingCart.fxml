<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.layout.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.control.*?>
<?import javafx.geometry.Insets?>
<?import io.github.palexdev.materialfx.controls.*?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.text.FontWeight?>
<?import javafx.scene.effect.DropShadow?>
<?import javafx.scene.paint.LinearGradient?>
<?import javafx.scene.paint.Stop?>
<?import javafx.scene.paint.Color?>
<?import java.net.URL?>

<AnchorPane fx:id="root" prefWidth="1200.0" prefHeight="800.0" 
            style="-fx-background-color: linear-gradient(to bottom, #f8f9fa, #e9ecef);"
            xmlns="http://javafx.com/javafx/8" xmlns:fx="http://javafx.com/fxml" 
            fx:controller="com.phoneshop.fxui.store.ShoppingCartController">
   
<!--   <stylesheets>-->
<!--&lt;!&ndash;       <URL value="@/css/ShoppingCart.css" />&ndash;&gt;-->
<!--   </stylesheets>-->

   <children>
      <!-- Main Grid Layout -->
      <GridPane fx:id="mainGrid" AnchorPane.topAnchor="0.0" AnchorPane.bottomAnchor="0.0" 
                AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" hgap="0" vgap="0">
         
         <!-- Header Row -->
         <VBox fx:id="headerContainer" spacing="0" GridPane.rowIndex="0" GridPane.columnIndex="0"
               GridPane.columnSpan="2">
            
            <!-- Top Banner -->
            <StackPane prefHeight="45" style="-fx-background-color: linear-gradient(to right, #667eea 0%, #764ba2 100%);">
               <Label fx:id="topBannerText" 
                      text="SẢN PHẨM CHÍNH HÃNG - CAM KẾT LỖI ĐỔI LIỀN - HOTLINE 1420.0420"
                      style="-fx-font-size: 14px; -fx-text-fill: white; -fx-font-weight: bold;"
                      StackPane.alignment="CENTER"/>
            </StackPane>

            <!-- Main Header với 3 cột -->
            <HBox prefHeight="80.0" alignment="CENTER" 
                  style="-fx-background-color: white; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 2);">
               
               <!-- Cột trái: Logo -->
               <HBox alignment="CENTER_LEFT" style="-fx-padding: 0 40;" HBox.hgrow="NEVER">
                  <ImageView fitHeight="65" preserveRatio="true">
                     <image>
                        <Image url="@/images/logo6.png" />
                     </image>
                  </ImageView>
               </HBox>

               <!-- Cột giữa: Search -->
               <HBox alignment="CENTER" spacing="15" HBox.hgrow="ALWAYS">
                  <TextField fx:id="searchBar"
                             prefWidth="400.0"
                             promptText="🔍 Tìm kiếm sản phẩm, hãng sản xuất,..."
                             style="
                                 -fx-font-size: 16px;
                                 -fx-prompt-text-fill: #9ca3af;
                                 -fx-background-color: #f3f4f6;
                                 -fx-background-radius: 25;
                                 -fx-border-radius: 25;
                                 -fx-border-color: #e5e7eb;
                                 -fx-border-width: 1;
                                 -fx-padding: 12 20;
                                 -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.05), 5, 0, 0, 1);">
                  </TextField>

                  <MFXButton fx:id="btnSearch" 
                             text="Tìm kiếm" 
                             onAction="#btnSearchClick"
                             style="-fx-background-color: linear-gradient(to right, #667eea 0%, #764ba2 100%); 
                                    -fx-text-fill: white; 
                                    -fx-font-weight: bold;
                                    -fx-background-radius: 25;
                                    -fx-padding: 12 25;
                                    -fx-effect: dropshadow(gaussian, rgba(102,126,234,0.3), 8, 0, 0, 2);"/>
               </HBox>

               <!-- Cột phải: Cart, User, Logout -->
               <HBox alignment="CENTER_RIGHT" spacing="20" style="-fx-padding: 0 40;" HBox.hgrow="NEVER">
                  
                  <!-- Cart Button -->
                  <Button style="-fx-background-color: transparent; -fx-border-color: transparent;">
                     <graphic>
                        <ImageView fitHeight="30" fitWidth="30" style="-fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 3, 0, 0, 1);">
                           <image>
                              <Image url="@/images/cart.png"/>
                           </image>
                        </ImageView>
                     </graphic>
                  </Button>

                  <!-- User Section -->
                  <HBox alignment="CENTER_LEFT" spacing="8">
                     <ImageView fitHeight="32" fitWidth="32" style="-fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 3, 0, 0, 1);">
                        <image>
                           <Image url="@/images/user.png"/>
                        </image>
                     </ImageView>
                     <Label fx:id="txtUserName" text="" 
                            style="-fx-font-size: 14px; -fx-font-weight: 600; -fx-text-fill: #374151;"/>
                  </HBox>

                  <!-- Logout Button -->
                  <MFXButton fx:id="btnLogOut" 
                             text="Đăng xuất" 
                             onAction="#btnLogOut"
                             style="-fx-background-color: #ef4444; 
                                    -fx-text-fill: white; 
                                    -fx-font-weight: bold;
                                    -fx-background-radius: 20;
                                    -fx-padding: 10 20;
                                    -fx-effect: dropshadow(gaussian, rgba(239,68,68,0.3), 6, 0, 0, 2);"/>
               </HBox>
            </HBox>
         </VBox>

         <!-- Main Content Row -->
         <VBox fx:id="mainContent" spacing="30.0" GridPane.rowIndex="1" GridPane.columnIndex="0"
               GridPane.columnSpan="2" style="-fx-padding: 40;">
            
            <!-- Shopping Cart Header -->
            <HBox alignment="CENTER_LEFT" spacing="15" style="-fx-padding: 0 0 20 0;">
               <Label text="🛒" style="-fx-font-size: 32px;"/>
               <VBox spacing="5">
                  <Label text="Giỏ hàng của bạn" 
                         style="-fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: #1f2937;"/>
                  <Label text="Quản lý sản phẩm và thanh toán" 
                         style="-fx-font-size: 14px; -fx-text-fill: #6b7280;"/>
               </VBox>
            </HBox>

            <!-- Main Content Container với 2 cột -->
            <HBox spacing="30" style="-fx-padding: 0;">
               
               <!-- Cột trái: Danh sách sản phẩm -->
               <VBox spacing="20" HBox.hgrow="ALWAYS" 
                     style="-fx-background-color: white; -fx-background-radius: 20; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 15, 0, 0, 5); -fx-padding: 30;">
                  
                  <!-- Cart Items Header -->
                  <HBox alignment="CENTER_LEFT" spacing="10" style="-fx-padding: 0 0 20 0; -fx-border-color: #e5e7eb; -fx-border-width: 0 0 1 0;">
                     <Label text="Sản phẩm trong giỏ hàng" 
                            style="-fx-font-size: 18px; -fx-font-weight: 600; -fx-text-fill: #374151;"/>
                  </HBox>

                  <!-- Cart Items List -->
                  <ScrollPane fitToWidth="true" prefHeight="500.0"
                              style="-fx-background-color: transparent; -fx-background: transparent;">
                     <VBox fx:id="cartList" spacing="20">
                        <padding>
                           <Insets top="10" right="10" bottom="10" left="10"/>
                        </padding>
                     </VBox>
                  </ScrollPane>
               </VBox>

               <!-- Cột phải: Tóm tắt đơn hàng -->
               <VBox spacing="20" prefWidth="350" minWidth="350" maxWidth="350"
                     style="-fx-background-color: white; -fx-background-radius: 20; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 15, 0, 0, 5); -fx-padding: 30;">
                  
                  <!-- Order Summary Header -->
                  <Label text="Tóm tắt đơn hàng" 
                         style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #1f2937;"/>
                  
                  <!-- Total Amount -->
                  <VBox spacing="10" style="-fx-padding: 20; -fx-background-color: #f9fafb; -fx-background-radius: 15;">
                     <HBox alignment="CENTER_LEFT" spacing="10">
                        <Label text="💳" style="-fx-font-size: 20px;"/>
                        <VBox spacing="5">
                           <Label text="Tổng cộng" style="-fx-font-size: 14px; -fx-text-fill: #6b7280;"/>
                           <Label fx:id="totalLabel" text="0 VNĐ"
                                  style="-fx-font-size: 24px; -fx-font-weight: bold; -fx-text-fill: #dc2626;"/>
                        </VBox>
                     </HBox>
                  </VBox>

                  <!-- Payment Method -->
                  <VBox spacing="8">
                     <Label text="Phương thức thanh toán"
                            style="-fx-font-size: 14px; -fx-font-weight: 600; -fx-text-fill: #374151;"/>
                     <ComboBox fx:id="paymentMethodComboBox" prefWidth="300.0"
                               style="-fx-background-color: white; -fx-background-radius: 10; -fx-border-radius: 10; -fx-border-color: #e5e7eb;"/>
                  </VBox>

                  <!-- Action Buttons -->
                  <VBox spacing="12">
                     <MFXButton fx:id="btnCheckout" 
                                text="Đặt Hàng Ngay"
                                onAction="#btnCheckoutClick" 
                                style="-fx-background-color: linear-gradient(to right, #10b981 0%, #059669 100%); 
                                       -fx-text-fill: white; 
                                       -fx-font-size: 16px;
                                       -fx-font-weight: bold;
                                       -fx-background-radius: 25;
                                       -fx-padding: 15 30;
                                       -fx-effect: dropshadow(gaussian, rgba(16,185,129,0.4), 10, 0, 0, 3);"/>
                     
                     <MFXButton fx:id="btnBack" 
                                text="← Tiếp tục mua hàng" 
                                onAction="#btnBackClick"
                                style="-fx-background-color: #6b7280; 
                                       -fx-text-fill: white; 
                                       -fx-font-weight: 600;
                                       -fx-background-radius: 25;
                                       -fx-padding: 12 25;
                                       -fx-effect: dropshadow(gaussian, rgba(107,114,128,0.3), 6, 0, 0, 2);"/>
                  </VBox>
               </VBox>
            </HBox>
         </VBox>

         <!-- Grid Constraints -->
         <rowConstraints>
            <RowConstraints prefHeight="125" minHeight="125" />
            <RowConstraints vgrow="ALWAYS" />
         </rowConstraints>
         <columnConstraints>
            <ColumnConstraints hgrow="ALWAYS" />
         </columnConstraints>
      </GridPane>
   </children>
</AnchorPane>
