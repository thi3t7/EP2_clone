<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Spinner?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.text.FontWeight?>
<?import javafx.scene.effect.DropShadow?>
<?import javafx.scene.paint.LinearGradient?>
<?import javafx.scene.paint.Stop?>
<?import javafx.scene.paint.Color?>

<?import io.github.palexdev.materialfx.controls.MFXButton?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.Region?>

<AnchorPane fx:id="root" prefHeight="800.0" prefWidth="1200.0"
            style="-fx-background-color: linear-gradient(to bottom, #f8f9fa, #e9ecef);"
            xmlns="http://javafx.com/javafx/24.0.1" 
            xmlns:fx="http://javafx.com/fxml/1" 
            fx:controller="com.phoneshop.fxui.store.ProductView2Controller">
   
   <children>
      <!-- Main Grid Layout -->
      <GridPane fx:id="mainGrid" AnchorPane.topAnchor="0.0" AnchorPane.bottomAnchor="0.0" 
                AnchorPane.leftAnchor="0.0" AnchorPane.rightAnchor="0.0" hgap="0" vgap="0">
         
         <!-- Header Row -->
         <VBox fx:id="headerContainer" spacing="0" GridPane.rowIndex="0" GridPane.columnIndex="0"
               GridPane.columnSpan="2">
            
            <!-- Top Banner -->
            <StackPane prefHeight="45" style="-fx-background-color: linear-gradient(to right, #667eea 0%, #764ba2 100%);">
               <Label fx:id="topBannerText" 
                      text="SẢN PHẨM CHÍNH HÃNG - CAM KẾT LỖI ĐỔI LIỀN - HOTLINE 1420.0420"
                      style="-fx-font-size: 14px; -fx-text-fill: white; -fx-font-weight: bold;"
                      StackPane.alignment="CENTER_LEFT"/>
            </StackPane>

            <!-- Main Header với 3 cột -->
            <HBox prefHeight="80.0" alignment="CENTER" 
                  style="-fx-background-color: white; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 2);">
               
               <!-- Cột trái: Logo -->
               <HBox alignment="CENTER_LEFT" style="-fx-padding: 0 40;" HBox.hgrow="NEVER">
                  <ImageView fitHeight="65" preserveRatio="true">
                     <image>
                        <Image url="@/images/logo6.png" />
                     </image>
                  </ImageView>
               </HBox>

               <!-- Cột giữa: Search -->
               <HBox alignment="CENTER" spacing="15" HBox.hgrow="ALWAYS">
                  <TextField fx:id="searchBar"
                             prefWidth="400.0"
                             promptText="🔍 Tìm kiếm sản phẩm, hãng sản xuất,..."
                             style="
                                 -fx-font-size: 16px;
                                 -fx-prompt-text-fill: #9ca3af;
                                 -fx-background-color: #f3f4f6;
                                 -fx-background-radius: 25;
                                 -fx-border-radius: 25;
                                 -fx-border-color: #e5e7eb;
                                 -fx-border-width: 1;
                                 -fx-padding: 12 20;
                                 -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.05), 5, 0, 0, 1);">
                  </TextField>

                  <MFXButton fx:id="btnSearch" 
                             text="Tìm kiếm" 
                             onAction="#btnSearchClick"
                             style="-fx-background-color: linear-gradient(to right, #667eea 0%, #764ba2 100%); 
                                    -fx-text-fill: white; 
                                    -fx-font-weight: bold;
                                    -fx-background-radius: 25;
                                    -fx-padding: 12 25;
                                    -fx-effect: dropshadow(gaussian, rgba(102,126,234,0.3), 8, 0, 0, 2);"/>
               </HBox>

               <!-- Cột phải: Cart, User, Logout -->
               <HBox alignment="CENTER_RIGHT" spacing="20" style="-fx-padding: 0 40;" HBox.hgrow="NEVER">
                  
                  <!-- Cart Button -->

                  <!-- User Section -->
                  <HBox alignment="CENTER_LEFT" spacing="8">
                     <ImageView fitHeight="32" fitWidth="32" style="-fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 3, 0, 0, 1);">
                        <image>
                           <Image url="@/images/user.png"/>
                        </image>
                     </ImageView>
                     <Label fx:id="txtUserName" text="" 
                            style="-fx-font-size: 14px; -fx-font-weight: 600; -fx-text-fill: #374151;"/>
                  </HBox>

                  <!-- Logout Button -->
                  <MFXButton fx:id="btnLogOut" 
                             text="Đăng xuất" 
                             onAction="#btnLogOut"
                             style="-fx-background-color: #ef4444; 
                                    -fx-text-fill: white; 
                                    -fx-font-weight: bold;
                                    -fx-background-radius: 20;
                                    -fx-padding: 10 20;
                                    -fx-effect: dropshadow(gaussian, rgba(239,68,68,0.3), 6, 0, 0, 2);"/>
               </HBox>
            </HBox>
         </VBox>

         <!-- Main Content Row -->
         <VBox fx:id="mainContent" spacing="30.0" GridPane.rowIndex="1" GridPane.columnIndex="0"
               GridPane.columnSpan="2" style="-fx-padding: 40;">
            
            <!-- Product Card -->
            <HBox spacing="40.0" style="-fx-background-color: white; -fx-background-radius: 20; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 15, 0, 0, 5); -fx-padding: 30;">
               
               <!-- Left Column: Image Gallery -->
               <VBox spacing="20" HBox.hgrow="ALWAYS">
                  <!-- Main Image -->
                  <StackPane style="-fx-background-color: #f8f9fa; -fx-background-radius: 15; -fx-padding: 20;">
                     <ImageView fx:id="Img" fitHeight="450.0" fitWidth="460.0" preserveRatio="true" 
                                style="-fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 3);" />
                  </StackPane>

                  <HBox spacing="10" alignment="CENTER">
                     <Button fx:id="btnPrevImage" text="←" onAction="#handlePrevImage"
                             style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-background-radius: 20;" />

                     <Label fx:id="lbImageIndex" text="1 / 3"
                            style="-fx-font-size: 14px; -fx-text-fill: #374151;" />

                     <Button fx:id="btnNextImage" text="→" onAction="#handleNextImage"
                             style="-fx-font-size: 16px; -fx-font-weight: bold; -fx-background-radius: 20;" />
                  </HBox>



                  <!-- Back Button -->
                  <MFXButton fx:id="btnBack" 
                             onAction="#btnBackClick" 
                             text="← Quay lại" 
                             style="-fx-background-color: #6b7280; 
                                    -fx-text-fill: white; 
                                    -fx-font-weight: 600;
                                    -fx-background-radius: 25;
                                    -fx-padding: 12 25;
                                    -fx-effect: dropshadow(gaussian, rgba(107,114,128,0.3), 6, 0, 0, 2);"/>
               </VBox>

               <!-- Right Column: Product Info -->
               <VBox spacing="20" HBox.hgrow="ALWAYS" style="-fx-padding: 20;">
                  
                  <!-- Product Name -->
                  <VBox spacing="5">
                     <Label text="Tên sản phẩm" style="-fx-font-size: 12px; -fx-text-fill: #6b7280; -fx-font-weight: 500;"/>
                     <Label fx:id="lbName" 
                            style="-fx-font-size: 28px; -fx-font-weight: bold; -fx-text-fill: #1f2937;" 
                            wrapText="true" />
                  </VBox>

                  <!-- Price -->
                  <VBox spacing="5" style="-fx-background-color: #fef3c7; -fx-background-radius: 10; -fx-padding: 15;">
                     <Label text="Giá bán" style="-fx-font-size: 12px; -fx-text-fill: #92400e; -fx-font-weight: 500;"/>
                     <Label fx:id="lbPrice" 
                            style="-fx-font-size: 32px; -fx-font-weight: bold; -fx-text-fill: #dc2626;" />
                  </VBox>

                  <!-- Specifications -->
                  <VBox spacing="15">
                     <Label text="Thông số kỹ thuật" style="-fx-font-size: 16px; -fx-font-weight: 600; -fx-text-fill: #374151;"/>
                     
                     <GridPane hgap="15" vgap="12" style="-fx-background-color: #f9fafb; -fx-background-radius: 10; -fx-padding: 20;">
                        
                        <Label text="Hệ điều hành:" GridPane.columnIndex="0" GridPane.rowIndex="0" 
                               style="-fx-font-size: 14px; -fx-text-fill: #6b7280; -fx-font-weight: 500;" />
                        <Label fx:id="lbSystem" GridPane.columnIndex="1" GridPane.rowIndex="0" 
                               style="-fx-font-size: 14px; -fx-text-fill: #1f2937; -fx-font-weight: 600;" />
                        
                        <Label text="Chip:" GridPane.columnIndex="0" GridPane.rowIndex="1" 
                               style="-fx-font-size: 14px; -fx-text-fill: #6b7280; -fx-font-weight: 500;" />
                        <Label fx:id="lbChip" GridPane.columnIndex="1" GridPane.rowIndex="1" 
                               style="-fx-font-size: 14px; -fx-text-fill: #1f2937; -fx-font-weight: 600;" />
                        
                        <Label text="Bộ nhớ:" GridPane.columnIndex="0" GridPane.rowIndex="2" 
                               style="-fx-font-size: 14px; -fx-text-fill: #6b7280; -fx-font-weight: 500;" />
                        <Label fx:id="lbMemory" GridPane.columnIndex="1" GridPane.rowIndex="2" 
                               style="-fx-font-size: 14px; -fx-text-fill: #1f2937; -fx-font-weight: 600;" />
                        
                        <Label text="Pin Sạc:" GridPane.columnIndex="0" GridPane.rowIndex="3" 
                               style="-fx-font-size: 14px; -fx-text-fill: #6b7280; -fx-font-weight: 500;" />
                        <Label fx:id="lbBattery" GridPane.columnIndex="1" GridPane.rowIndex="3" 
                               style="-fx-font-size: 14px; -fx-text-fill: #1f2937; -fx-font-weight: 600;" />
                        
                        <Label text="Màn hình:" GridPane.columnIndex="0" GridPane.rowIndex="4" 
                               style="-fx-font-size: 14px; -fx-text-fill: #6b7280; -fx-font-weight: 500;" />
                        <Label fx:id="lbScreen" GridPane.columnIndex="1" GridPane.rowIndex="4" 
                               style="-fx-font-size: 14px; -fx-text-fill: #1f2937; -fx-font-weight: 600;" />
                        
                        <Label text="Camera:" GridPane.columnIndex="0" GridPane.rowIndex="5" 
                               style="-fx-font-size: 14px; -fx-text-fill: #6b7280; -fx-font-weight: 500;" />
                        <Label fx:id="lbCamera" GridPane.columnIndex="1" GridPane.rowIndex="5" 
                               style="-fx-font-size: 14px; -fx-text-fill: #1f2937; -fx-font-weight: 600;" />
                        
                        <columnConstraints>
                           <ColumnConstraints hgrow="SOMETIMES" />
                           <ColumnConstraints hgrow="SOMETIMES" />
                        </columnConstraints>
                        <rowConstraints>
                           <RowConstraints prefHeight="30" />
                           <RowConstraints prefHeight="30" />
                           <RowConstraints prefHeight="30" />
                           <RowConstraints prefHeight="30" />
                           <RowConstraints prefHeight="30" />
                           <RowConstraints prefHeight="30" />
                        </rowConstraints>
                     </GridPane>
                  </VBox>

                  <!-- Quantity Selector -->
                  <VBox spacing="10">
                     <Label text="Số lượng" style="-fx-font-size: 14px; -fx-font-weight: 600; -fx-text-fill: #374151;"/>
                     <HBox alignment="CENTER_LEFT" spacing="15">
                        <Spinner fx:id="Spinner" editable="true" prefWidth="120.0" 
                                 style="-fx-background-color: #f3f4f6; -fx-background-radius: 10; -fx-border-radius: 10; -fx-border-color: #e5e7eb;" />
                     </HBox>
                  </VBox>

                  <!-- Add to Cart Button -->
                  <MFXButton fx:id="btnAddToCart" 
                             onAction="#btnAddToCartClick" 
                             style="-fx-background-color: linear-gradient(to right, #10b981 0%, #059669 100%); 
                                    -fx-text-fill: white; 
                                    -fx-font-size: 16px;
                                    -fx-font-weight: bold;
                                    -fx-background-radius: 25;
                                    -fx-padding: 15 30;
                                    -fx-effect: dropshadow(gaussian, rgba(16,185,129,0.4), 10, 0, 0, 3);" 
                             text="🛒 Thêm vào giỏ hàng" />
               </VBox>
            </HBox>
         </VBox>

         <!-- Grid Constraints -->
         <rowConstraints>
            <RowConstraints prefHeight="125" minHeight="125" />
            <RowConstraints vgrow="ALWAYS" />
         </rowConstraints>
         <columnConstraints>
            <ColumnConstraints hgrow="ALWAYS" />
         </columnConstraints>
      </GridPane>
   </children>
</AnchorPane>
